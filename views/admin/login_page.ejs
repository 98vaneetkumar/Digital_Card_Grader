<!-- BEGIN: Head-->
<%-include('../common/header')%>
<!-- END: Head-->
<style>
  input::-ms-reveal,
  input::-ms-clear {
    display: none;
  }

  label.error {
    color: red;
    font-size: 13px;
    font-weight: 500;
    margin-top: 5px;
    display: block;
  }

  .input-group:has(#password-error) {
    margin-bottom: 30px;
  }

  #password-error {
    bottom: -24px;
    position: absolute;
    font-weight: 500;
    left: 0;
    font-size: 13px;
    margin-bottom: 3px;
  }

  .login_area {
    background: url(/assets/logo2.jpg) no-repeat center/cover;
    min-height: 100vh;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    position: relative;
    z-index: 0;
  }

  .login_area::before {
    content: "";
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: -1;
    top: 0;
    left: 0;
    background-color: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(10px);
    opacity: 0.4;
  }

  .login-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: 0 5%;
  }

  .auth-bg img {
    width: 100px;
    margin-bottom: 20px;
    animation: fadeIn 1s ease-in-out;
  }

  .auth-login-form label {
    color: #fff;
    font-size: 15px;
    font-weight: 600;
    margin-bottom: 6px;
    display: block;
  }

.login_area {
  background: url(/assets/logo2.jpg) no-repeat center/cover;
  min-height: 100vh;
  display: flex;
  justify-content: center; /* Center horizontally */
  align-items: center; /* Center vertically */
  position: relative;
  z-index: 0;
}

.login_area::before {
  content: "";
  width: 100%;
  height: 100%;
  position: absolute;
  z-index: -1;
  top: 0;
  left: 0;
  background-color: rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(10px);
  opacity: 0.4;
}

.login-container {
  display: flex;
  justify-content: center; /* Center the card horizontally */
  align-items: center; /* Center the card vertically */
  width: 100%;
  height: 100%;
  padding: 0;
}

.login_card {
  border-radius: 12px;
  padding: 50px 30px;
  backdrop-filter: blur(18px);
  width: 100%;
  max-width: 400px;
  box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.3);
  transform: translateX(0); /* Remove left margin shift */
  animation: fadeInRight 1s ease-in-out forwards;
  transition: transform 0.3s ease-in-out;
}

.login_card:hover {
  transform: scale(1.02);
}


  .form-control {
    background: white;
    border: 1px solid rgba(255, 255, 255, 0.5);
    padding: 12px;
    color: black !important;
    border-radius: 8px;
    transition: all 0.3s ease-in-out;
  }

  .form-control:focus,
  .form-control:valid {
    background: white;
    color: black;
    border: 1px solid rgba(255, 255, 255, 0.5);
    outline: none;
  }

  .input-group-text {
    background: white;
    border: none;
    color: black;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
  }

  .custom-btn {
    background: linear-gradient(to right, #1c1c1c, #2a2a2a);
    color: white;
    border: none;
    padding: 12px;
    font-size: 17px;
    font-weight: bold;
    border-radius: 8px;
    box-shadow: 0px 4px 8px rgba(160, 233, 255, 0.4);
    transition: all 0.3s ease-in-out;
    width: 100%;
    margin-top: 15px;
  }

  .custom-btn:hover {
    filter: brightness(1.08);
    transform: translateY(-3px);
    box-shadow: 0px 6px 12px rgba(160, 233, 255, 0.5);
    color: white;
  }

  @keyframes fadeInLeft {
    from {
      opacity: 0;
      transform: translateX(50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes quoteGlow {
    0% {
      text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.1);
    }
    50% {
      text-shadow: 2px 2px 8px rgba(255, 255, 255, 0.2);
    }
    100% {
      text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.1);
    }
  }
</style>

<!-- BEGIN: Body-->
<body
  class="login_page vertical-layout vertical-menu-modern blank-page navbar-floating footer-static"
  data-open="click"
  data-menu="vertical-menu-modern"
  data-col="blank-page"
>
  <!-- BEGIN: Content-->
  <div class="app-content content">
    <div class="content-overlay"></div>
    <div class="header-navbar-shadow"></div>
    <div class="content-wrapper">
      <div class="content-header row"></div>
      <div class="content-body">
        <div class="login_area">
          <div class="login-container">
            <div class="login_card">
              <div class="text-center">
                <img
                  class="mx-auto"
                  src="../../assets/logo1.jpg"
                  width="120"
                  alt=""
                />
              </div>
              <form
                class="auth-login-form mt-2"
                action="/admin/login"
                id="login_form"
                method="POST"
              >
                <div class="mb-1">
                  <label class="form-label" for="email">Email</label>
                  <input
                    class="form-control"
                    id="email"
                    type="text"
                    name="email"
                    placeholder="Enter Email"
                    aria-describedby="email"
                    autofocus=""
                    tabindex="1"
                  />
                </div>
                <div class="mb-1">
                  <div class="d-flex justify-content-between">
                    <label class="form-label" for="password">Password</label>
                  </div>
                  <div class="position-relative">
                    <input
                      class="form-control pe-4"
                      id="password"
                      type="password"
                      name="password"
                      placeholder="Enter Password"
                      aria-describedby="password"
                      autofocus=""
                      tabindex="2"
                    />
                    <span
                      class="position-absolute end-0 top-50 translate-middle-y me-2 cursor-pointer"
                      onclick="togglePassword()"
                    >
                      <i id="toggleEye" data-feather="eye"></i>
                    </span>
                  </div>
                </div>
                <button class="btn w-100 custom-btn" tabindex="4">
                  Sign in
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- END: Content-->

  <!-- BEGIN: Scripts -->
  <%-include('../common/script')%>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.20.0/jquery.validate.min.js"
    integrity="sha512-WMEKGZ7L5LWgaPeJtw9MBM4i5w5OSBlSjTjCtSnvFJGSVD26gE5+Td12qN5pvWXhuWaWcVwF++F7aqu9cvqP0A=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script>
    $(document).ready(function () {
      // Custom method to disallow spaces in the email field
      $.validator.addMethod(
        "noSpace",
        function (value, element) {
          return value.indexOf(" ") < 0 && value != "";
        },
        "Spaces are not allowed"
      );

      // Disable space key for the email field
      $("#email").keypress(function (e) {
        if (e.keyCode == 32) {
          return false;
        }
      });

      $("#login_form").validate({
        rules: {
          email: {
            required: true,
            email: true,
            noSpace: true,
          },
          password: {
            required: true,
            minlength: 6,
          },
        },
        messages: {
          email: {
            required: "Please enter your email",
            email: "Please enter a valid email",
          },
          password: {
            required: "Please enter your password",
            minlength: "Your password must be at least 6 characters long",
          },
        },
      });
    });
  </script>

  <script>
    $(window).on("load", function () {
      if (feather) {
        feather.replace({
          width: 14,
          height: 14,
        });
      }
    });
  </script>

  <!-- Include SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
    $(document).ready(function () {
      $("#login_form").submit(function (e) {
        e.preventDefault(); // Prevent default form submission

        $.ajax({
          url: "/admin/login",
          type: "POST",
          data: $(this).serialize(),
          success: function (response) {
            if (response.success) {
              window.location.href = "/admin/dashboard"; // Redirect on success
            } else {
              showErrorAlert(); // Show alert on failure
            }
          },
          error: function () {
            showErrorAlert(); // Show alert on server error
          },
        });
      });

      function showErrorAlert() {
        Swal.fire({
          position: "top-end",
          icon: "error",
          title: "Incorrect email or password",
          showConfirmButton: false,
          timer: 3000,
          toast: true,
        });
      }
    });
  </script>

  <script>
    function togglePassword() {
      let passwordInput = document.getElementById("password");
      let toggleEye = document.getElementById("toggleEye");

      if (passwordInput.type === "password") {
        passwordInput.type = "text";
        toggleEye.setAttribute("data-feather", "eye-off");
      } else {
        passwordInput.type = "password";
        toggleEye.setAttribute("data-feather", "eye");
      }

      feather.replace(); // Refresh Feather icons
    }
  </script>

  <!-- END: Scripts -->
</body>
